<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vex's Aim Training</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle at top center, #1f2937, #0f172a);
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    h1 {
      color: #00f0ff;
      margin-top: 20px;
      text-shadow: 0 0 3px #00f0ff;
    }

    #infoPanel {
      display: flex;
      justify-content: space-between;
      width: 640px;
      color: #00f0ff;
      margin-top: 10px;
      font-size: 18px;
      text-shadow: 0 0 2px #00f0ff;
    }

    #gameContainer {
      display: flex;
      margin-top: 20px;
      gap: 20px;
      position: relative;
    }

    #vexImage {
      width: 180px;
      height: 420px;
      background: url('vexgame.PNG') center/cover no-repeat;
      border: 2px solid #00f0ff;
      box-shadow: 0 0 12px #00f0ff;
      border-radius: 12px;
    }

    #gameBox {
      position: relative;
      width: 640px;
      height: 420px;
      background: linear-gradient(to top, #1e6b9c 50%, #0e2f44 100%);
      border: 3px solid #00f0ff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 15px #00f0ff;
    }

    #bottomRightImage {
      position: fixed;
      bottom: 10px;
      right: 10px;
      width: 160px;
      z-index: 1000;
      filter: drop-shadow(0 0 8px #00f0ff);
    }

    .target {
      position: absolute;
      width: 90px;
      height: 90px;
      cursor: pointer;
      filter: drop-shadow(0 0 6px #00f0ff);
    }

    #hearts {
      color: #ff4f4f;
      text-shadow: 0 0 6px #ff4f4f;
      font-size: 1.5em;
    }

    #timer, #score {
      color: #00f0ff;
    }

    #startBtn, #restartBtn {
      margin-top: 16px;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #00f0ff;
      color: #0f172a;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      box-shadow: 0 0 10px #00f0ff;
    }

    #restartBtn {
      display: none;
    }

    #leaderboard {
      position: fixed;
      top: 10px;
      left: 10px;
      width: 200px;
      background: #0e2f44;
      border: 2px solid #00f0ff;
      border-radius: 10px;
      padding: 10px;
      color: #00f0ff;
      text-shadow: 0 0 1px #00f0ff;
      font-size: 14px;
      box-shadow: 0 0 10px #00f0ff;
      z-index: 9999;
    }

    #leaderboard h3 {
      margin-top: 0;
      font-size: 16px;
      text-align: center;
    }

    #volumeControl {
      margin-top: 12px;
      color: #00f0ff;
      font-size: 14px;
      text-shadow: 0 0 2px #00f0ff;
    }

    @keyframes glitch {
      0% { filter: hue-rotate(0deg) brightness(1); }
      25% { filter: hue-rotate(30deg) brightness(1.2); }
      50% { filter: hue-rotate(-30deg) brightness(0.8); }
      75% { filter: hue-rotate(60deg) brightness(1.3); }
      100% { filter: hue-rotate(0deg) brightness(1); }
    }

    #introModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(15, 23, 42, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99999;
    }

    #introContent {
      background: #0e2f44;
      border: 3px solid #00f0ff;
      padding: 30px;
      border-radius: 16px;
      text-align: center;
      color: #00f0ff;
      width: 400px;
      box-shadow: 0 0 20px #00f0ff;
      font-family: 'Orbitron', sans-serif;
      animation: fadeIn 0.5s ease;
    }

    #introContent h2 {
      margin-top: 0;
      font-size: 24px;
      text-shadow: 0 0 4px #00f0ff;
    }

    #introContent p {
      margin: 12px 0;
      font-size: 16px;
      line-height: 1.4;
    }

    #introOkayBtn {
      margin-top: 20px;
      padding: 10px 24px;
      font-size: 16px;
      background-color: #00f0ff;
      color: #0f172a;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      box-shadow: 0 0 10px #00f0ff;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>

  <h1>Vex's Aim Training</h1>

  <!-- Intro Modal -->
  <div id="introModal">
    <div id="introContent">
      <h2>Welcome to Vex's Aim Training</h2>
      <p>üéØ Hit as many regular targets as you can to increase your score.</p>
      <p>üö´ Avoid the Yumiko targets ‚Äî they'll cost you a heart and 5 points.</p>
      <p>‚è∞ Grab the clock target for +10 seconds!</p>
      <p>‚ù§Ô∏è You have 3 hearts. Try to survive as long as you can. Have fun!</p>
      <button id="introOkayBtn">Okay, Let‚Äôs Play</button>
    </div>
  </div>

  <!-- Audio Elements -->
  <audio id="bgMusic" src="backgroundmusic.wav" loop></audio>

  <!-- Leaderboard -->
  <div id="leaderboard">
    <h3>Leaderboard</h3>
    <ul id="scoresList" style="padding-left: 16px; margin: 0;"></ul>
  </div>

  <img id="bottomRightImage" src="yumiandvexgame.PNG" alt="Yumi and Vex">

  <div id="infoPanel">
    <div id="score">Score: 0</div>
    <div id="hearts">‚ô° ‚ô° ‚ô°</div>
    <div id="timer">Time Left: 30s</div>
  </div>

  <div id="gameContainer">
    <div id="vexImage"></div>
    <div id="gameBox"></div>
  </div>

  <div id="volumeControl">
    üîä Music Volume:
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.6">
  </div>

  <button id="startBtn">Start Game</button>
  <button id="restartBtn">Try Again</button>

  <script>
    const gameBox = document.getElementById("gameBox");
    const scoreDisplay = document.getElementById("score");
    const timerDisplay = document.getElementById("timer");
    const heartsDisplay = document.getElementById("hearts");
    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");
    const scoresList = document.getElementById("scoresList");
    const bgMusic = document.getElementById("bgMusic");
    const volumeSlider = document.getElementById("volumeSlider");

    let score = 0;
    let timeLeft = 30;
    let hearts = 3;
    let interval;
    let spawnInterval;
    let gameOver = true;
    let scoresHistory = [];
    let attemptCount = 0;

    window.addEventListener("load", () => {
      const modal = document.getElementById("introModal");
      const okayBtn = document.getElementById("introOkayBtn");
      okayBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });
    });

    volumeSlider.addEventListener("input", () => {
      bgMusic.volume = volumeSlider.value;
    });

    function updateScore() {
      scoreDisplay.textContent = "Score: " + score;
    }

    function updateHearts() {
      heartsDisplay.innerHTML = "‚ô° ".repeat(hearts).trim();
    }

    function glitchEffect() {
      gameBox.style.animation = 'glitch 0.3s';
      setTimeout(() => {
        gameBox.style.animation = '';
      }, 300);
    }

    function spawnMultipleTargets() {
      if (gameOver) return;

      const existingTargets = Array.from(gameBox.getElementsByClassName("target"));
      if (existingTargets.length >= 6) return;

      const maxNewTargets = Math.min(6 - existingTargets.length, 1 + Math.floor(Math.random() * 6));
      const placedPositions = [];

      for (let i = 0; i < maxNewTargets; i++) {
        let x, y, attempts = 0, overlap = false;
        do {
          x = Math.random() * (gameBox.clientWidth - 90);
          y = Math.random() * (gameBox.clientHeight - 90);
          overlap = placedPositions.some(pos => Math.abs(pos.x - x) < 90 && Math.abs(pos.y - y) < 90);
          attempts++;
        } while (overlap && attempts < 20);

        if (overlap) continue;
        placedPositions.push({ x, y });

        const target = document.createElement("img");
        target.classList.add("target");

        const rand = Math.random();
        let type = "regular", src = "target.PNG";
        if (rand < 0.05) {
          type = "time";
          src = "timegame.PNG";
        } else if (rand < 0.62) {
          type = "yumiko";
          src = "yumikotargetgame.PNG";
        }

        target.src = src;
        target.dataset.type = type;
        target.style.left = x + "px";
        target.style.top = y + "px";

        target.addEventListener("click", () => {
          if (type === "yumiko") {
            score = Math.max(0, score - 5);
            hearts--;
            updateHearts();
            glitchEffect();
            updateScore();
            if (hearts <= 0) endGame();
          } else if (type === "regular") {
            score++;
            updateScore();
          } else if (type === "time") {
            timeLeft += 10;
            timerDisplay.textContent = "Time Left: " + timeLeft + "s";
          }
          gameBox.removeChild(target);
        });

        gameBox.appendChild(target);

        setTimeout(() => {
          if (gameBox.contains(target)) gameBox.removeChild(target);
        }, 1500);
      }
    }

    function startGame() {
      score = 0;
      timeLeft = 30;
      hearts = 3;
      gameOver = false;
      updateScore();
      updateHearts();
      timerDisplay.textContent = "Time Left: " + timeLeft + "s";
      gameBox.innerHTML = '';

      bgMusic.currentTime = 0;
      bgMusic.play();

      interval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = "Time Left: " + timeLeft + "s";
        if (timeLeft <= 0) endGame();
      }, 1000);

      spawnMultipleTargets();
      spawnInterval = setInterval(spawnMultipleTargets, 1200);
    }

    function endGame() {
      bgMusic.pause();
      gameOver = true;
      clearInterval(interval);
      clearInterval(spawnInterval);
      gameBox.innerHTML = '';
      attemptCount++;
      scoresHistory.push({ id: attemptCount, value: score });
      scoresHistory.sort((a, b) => b.value - a.value);
      scoresList.innerHTML = scoresHistory.map(s => `<li>O${s.id}: ${s.value}</li>`).join('');
      restartBtn.style.display = "inline-block";
      startBtn.style.display = "none";
    }

    startBtn.addEventListener("click", () => {
      startBtn.style.display = "none";
      restartBtn.style.display = "none";
      startGame();
    });

    restartBtn.addEventListener("click", () => {
      restartBtn.style.display = "none";
      startGame();
    });
  </script>
</body>
</html>
